# 注意事项
+ RVC-P系列相机设备内部使用高亮度LED光源，相机工作时请勿直视，否则可能引起眼部不适或造成伤害
+ 使用原装电源适配器，否则可能对相机造成不可逆的损害
+ 工作温度：0~40℃
+ 避免阳光或强光源直射
+ 请在使用前仔细检查相机，确保相机处于正常可工作状态。当有异味、冒烟、螺丝脱落或损坏等现象，请立即断开电源，避免发生危险
+ 设备可正常工作电压为 DC 12~24 V，请根据产品的铭牌、使用说明，选择合适的电源适配器
+ 预防电磁干扰
+ 现场电压电流稳定有助于3D工业相机及视觉检测设备的稳定运行。在周边存在协同工作的大功率设备时，需要考虑将线束进行单独隔离包覆，以及对相机进行接地
+ 使用过程中，系统开/关机操作请在产品软件停止运行并断开设备后再进行，避免强行上电/断电操作

# 软件使用
+ 需要下载驱动程序(可向厂家确认)
+ 必须基于NVIDIA RTX系列显卡，并下载cuda
+ IP不在同一网段可以扫描出来
+ 光机：192.168.6.225
+ 左相机：192.168.6.245
+ 右相机：192.168.6.220
+ 检查相机是否在标定的工作区间，避免相机工作范围超出标定范围，否则点云效果及精度无法保证
+ 请尽量避免相机的使用环境中有强光直射，例如阳光、射灯等
+ 请检查被测样品是否是无色透明材质的
+ 使用前请揭掉贴在镜头及光机上的保护膜。若镜头及光机上有脏污，请及时用拭镜纸和酒精清洁
+ 请勿磕碰相机或人为调整拆解相机
+ 保持相机与被测样品在拍摄时静止，避免手持式拍摄
+ 通过调节参数设置，可优化点云拍摄效果
+ 出现如下情况，需要重新校准设备
  - 相机出现磕碰撞击；
  - 长时间未使用设备；
  - 重新安装设备；
  - 正常使用半年或一年
+ 使用网口相机必须保证网络为千兆网及以上，否则可能因为带宽不够而导致相机使用出现问题。连接网线时，应避免使用连接器拼接网线、避免使用 USB-网口转接器，否则可能降低网络传输质量，影响相机使用
+ 支持.ply格式的3D点云文件

# SDK开发包

## 环境配置：
+ 适配版本：Python 3.7—Python 3.10，推荐版本：Python 3.7.9
+ 安装 NumPy、OpenCV-Python
+ 安装 PyRVC 模块
+ 例程在RVCmanger安装目录下的examples文件夹中
+ Python使用例程的时候，把例程文件夹内的Utils文件夹copy到工程目录当中

## 例程文件说明(此说明基于官网)：
+ QuickCaptureX1：单目模式图像采集基础流程
+ QuickCaptureX2：双目模式图像采集基础流程
+ CaptureGigE：网口相机图像采集基础流程
+ CaptureUSB：USB 相机图像采集基础流程
+ CaptureInContinueMode：单目模式连续采集 10 次，保存点云与 2D 图
+ X1Capture2D：单目模式设置 2D 曝光，采集并保存 2D 图
+ X2Capture2D：双目模式设置 2D 曝光，采集并保存左相机获取的 2D 图
+ GetDepthImage：单目模式采集，保存点云、2D 图与深度图
+ GetNormalMap：采集并保存 2D 图与带有法向量的点云
+ SaveColorPointMap：采集并保存带有颜色数据的点云
+ GetValidPointMap：采集后获取点云中的有效点，保存有效点云

## 参数设置
| 方法  | 说明             |
|-----|----------------|
| 方法一 | 使用系统默认参数，并修改   |
| 方法二 | 加载相机内储存的参数，并修改 |
| 方法三 | 直接使用相机内部储存的参数  |
| 方法四 | 从配置文件中加载参数     |

### 参数设置例程说明
+ CaptureOptionsX1：单目模式打印拍摄参数，四种传参方式说明，调用相机内参数拍摄
+ CaptureOptionsX2：双目模式打印拍摄参数，四种传参方式说明，调用相机内参数拍摄
+ SaveLoadCaptureOptions：读取相机内的拍摄参数并修改，将修改后的参数存储到相机中并打印
+ SaveLoadCameraSetting：导出、加载.json 格式的拍摄参数
+ AdjustCaptureParameter：单目模式参数说明，修改拍摄参数，采集并保存点云与 2D 图
+ CaptureByX2：双目模式修改拍摄参数，采集并保存点云与 2D 图

### 参数功能
平滑、去噪、ROI、HDR等参数的设置方法与功能演示例程
+ AdjustCaptureMode：设置拍摄模式（普通/快速）
+ GetDownsamplePointMap：设置点云下采样距离
+ GetSmoothPointMap：设置点云平滑等级（关/弱/中/强）
+ GetConfidenceMap：设置置信度去噪阈值，采集并保存点云与 2D 图，在图像中选取一点，打印此点的置信度值
+ GetNoiseRemovalPointMap：设置聚类去噪参数（聚类去噪距离阈值、聚类去噪有效点数）
+ GetBilateralFiteredPointMap：设置双边滤波参数（双边滤波窗口大小、双边滤波深度分布、双边滤波空间分布）
+ GetZFilteredPointMap：设置 Z 向截断参数（Z 向截断最大值、Z 向截断最小值）
+ SetROI：设置 ROI（感兴趣区域），采集并保存此区域内的点云与 2D 图
+ X1HDR：单目模式设置 HDR 参数
+ X2HDR：双目模式设置 HDR 参数

### 自动调参
对于部分参数，RVC SDK 提供自动调参功能，可根据给定区域内的图像信息自动设置拍摄参数，以优化拍摄效果
+ GetAutoNoiseRemovalSetting：自动调整聚类去噪参数（聚类去噪距离阈值、聚类去噪有效点数）。
+ X1AutoSetParam：单目模式下设置 ROI 区域，根据给定的 ROI 区域自动调整部分参数（2D 曝光、3D 曝光、投影亮度、光强对比度阈值），打印调整后的参数，采集并保存点云与 2D 图。
+ X2AutoSetParam：双目模式下设置 ROI 区域，根据给定的 ROI 区域自动调整部分参数（2D 曝光、3D 曝光、投影亮度、光强对比度阈值），打印调整后的参数，采集并保存点云与左相机获取的 2D 图。
+ X1AutoHdrSetParam：单目模式下设置 ROI 区域，根据给定的 ROI 区域自动调整 HDR 参数（HDR 额外曝光次数及每次 3D 曝光时间），打印调整后的参数，采集并保存点云与 2D 图。
+ X2AutoHdrSetParam：双目模式下设置 ROI 区域，根据给定的 ROI 区域自动调整 HDR 参数（HDR 额外曝光次数及每次 3D 曝光时间），打印调整后的参数，采集并保存点云与左相机获取的 2D 图。

## 其他信息获取
### 标定板识别
+ GetCailBoardPoseX1：单目模式获取标定板位姿
+ GetCailBoardPoseX2：双目模式获取标定板位姿

### 坐标系转换
+ X1SetTransformation：单目模式下通过转换矩阵设置用户坐标系，将原坐标系下的点云转换至用户坐标系。
+ X2SetTransformation：双目模式下通过转换矩阵设置用户坐标系，将原坐标系下的点云转换至用户坐标系。

### 相机信息
+ GetCameraParameter：打印相机内参、外参

### 相机精度测试
+ X1TestAccuracy：单目模式测试相机精度
+ X2TestAccuracy：双目模式测试相机精度

### 数据类型转换与处理
+ ConvertDepthMapToPointMap：将深度图转换为点云（含畸变参数）
+ GetImageCorresponcePoint：读取 2D 图中的点，获取并打印该点在点云中对应的三维坐标
+ TruncatePointCloud：设置区域范围，按给定范围截取点云

# Python API
双目有Python的API，通过导入PyRVC，然后help()查看